---
title: 动态权重
createTime: 2025/11/29 13:22:19
---
# 动态权重系统 ⚖️

## 🎯 公平抽取-介绍

> **公平抽取**是一种智能随机抽取方式，它通过**动态权重算法**确保每个成员被抽取的概率与其历史被抽中次数成反比，从而实现真正的公平性。
>
> 适用于课堂提问、任务分配、活动参与等需要公平随机选择的场景。

::: tip 核心优势
- **智能平衡**：避免频繁抽中同一学生
- **动态调整**：权重随历史记录实时变化
- **多维度考量**：综合总次数、小组、性别等因素
:::

## ⚙️ 动态权重系统

动态权重系统是SecRandom实现公平抽取的核心引擎，通过**5个关键维度**计算每个成员的实时权重：

| 维度 | 作用 | 权重影响 |
|------|------|----------|
| 📊 **总抽取次数** | 防止频繁抽中同一人 | 次数越多，权重越低 |
| 👥 **小组平衡** | 确保各小组机会均等 | 小组被抽次数影响权重 |
| ⚧️ **性别平衡** | 保持性别比例平衡 | 性别被抽次数影响权重 |
| 🎯 **基础权重** | 提供基础公平性 | 固定基础分值 |
| 🆕 **冷启动保护** | 保护新加入成员 | 前10次抽取权重保护 |

## 🔍 算法逻辑详解

### 📈 权重计算过程

系统通过以下几个步骤对每位学生的抽取权重进行计算：

#### 1️⃣ 频率惩罚因子

系统根据学生的总抽取次数来计算频率惩罚因子，通过不同的数学函数来调整权重：

* **线性函数**：权重随抽取次数的增加线性下降。
* **平方根函数**：权重随着抽取次数的平方根减少。
* **指数函数**：权重呈指数级下降。

#### 2️⃣ 小组平衡因子

通过学生所在小组的历史抽取情况来确保每个小组有均等的机会。小组内抽取次数多的学生会得到适当的权重惩罚。

#### 3️⃣ 性别平衡因子

根据每个性别的历史抽取次数，确保抽取过程中性别比例的平衡。如果某一性别被过度抽取，该性别的学生会受到惩罚。

#### 4️⃣ 冷启动保护机制

对新加入的学生进行特别保护，确保他们在初期抽取中不会因数据不足而被忽视。保护期间会给予学生更高的初始权重。

#### 5️⃣ 时间因子

考虑学生最后一次被抽中的时间。距离上次抽取较长时间的学生将会得到更高的权重，增加其被抽中的机会。

### 🔄 权重合成与调整

各个维度的权重会按照配置的比例进行加权合成，最终生成每个学生的总权重。系统会确保权重在设置的最小值和最大值之间，避免出现极端值影响公平性。

### 📊 实际应用示例

假设有30名学生，其中：

* 小明已被抽中15次（高频）
* 小红被抽中3次（中频）
* 小刚是新同学（冷启动）

根据上述算法：

* **小明**：由于频率较高，频率惩罚较重，权重较低。
* **小红**：抽中次数适中，权重在正常水平。
* **小刚**：享有冷启动保护，权重较高。

### 🎲 抽取概率
系统根据实时权重计算抽取概率，确保长期统计下的公平性。